<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="context/main_template/macros/master"
      >
<body>

<!-- https://github.com/ploneintranet/ploneintranet.theme/blob/master/prototype/_includes/comment.html -->

    <metal:macro define-macro="main">
        <div class="comment">
            <div class="comment-header">
                <a href="user"
                   tal:attributes="href string:${view/portal_url}/author/${here/userid}"
                   tal:define="
                       userid here/userid;
                       avatar_img string:${view/portal_url}/portal_memberdata/portraits/${userid};
                       avatar_name userid;
                   "
                   >
                    <metal:block use-macro="here/@@avatar.html/main" />
                    <h4 class="name">${here/creator}</h4>
                    <time class="date" tal:content="python:view.toLocalizedTime(here.date)">1 hour ago</time>
                </a>
            </div>
            <section class="comment-content">
                <p tal:content="structure view/decorated_text">
                    The text of the comment
                </p>
            </section>

            <section class="preview">
                <figure tal:repeat="attachment view/attachments">
                    <a href="${attachment/link|attachment}">
                        <img alt="" src="${attachment/img_src|attachment}" alt="" />
                    </a>
                </figure>
            </section>
        </div>

    </metal:macro>
</body>
</html>
